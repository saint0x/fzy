use core.http;
use core.proc;

mod resultx;
mod text;
mod capability;
mod retry;
mod bytes;
mod duration;
mod abi;
mod cinterop;
mod network;
mod concurrency;
mod process;
mod security;

fn http_kernel_sample() -> i32 {
    let status = http.last_status()
    if status < 0 {
        return 0
    }
    return status % 251
}

fn sanity() -> i32 {
    let mut acc = 0
    acc = (acc + resultx.sample()) % 251
    acc = (acc + text.sample()) % 251
    acc = (acc + capability.sample()) % 251
    acc = (acc + retry.sample()) % 251
    acc = (acc + bytes.sample()) % 251
    acc = (acc + duration.sample()) % 251
    acc = (acc + abi.sample()) % 251
    acc = (acc + cinterop.sample()) % 251
    acc = (acc + http_kernel_sample()) % 251
    acc = (acc + network.sample()) % 251
    acc = (acc + concurrency.sample()) % 251
    acc = (acc + process.sample()) % 251
    acc = (acc + security.sample()) % 251
    return acc
}

fn main() -> i32 {
    return sanity()
}
