use cap.net;
use cap.time;

fn listen_public() -> i32 {
    let listener = net.bind()
    net.listen(listener)
    time.now()
    return 0
}

fn route_health() -> i32 {
    let conn = net.accept()
    net.read(conn)
    net.write(conn)
    net.close(conn)
    return 0
}

fn route_users() -> i32 {
    let conn = net.accept()
    ctx.deadline(1000)
    net.read(conn)
    net.write(conn)
    ctx.cancel_if_timeout()
    net.close(conn)
    return 0
}
